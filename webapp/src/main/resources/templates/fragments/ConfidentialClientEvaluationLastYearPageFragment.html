<!-- begin of PresentedTofragment -->
<div th:fragment="ConfidentialClientEvaluationLastYearPage"
	class="grad w3-container pageBreakInside">

	<div th:if="${PublishModel.confidentialClientEvaluationOnePage}">
		<!-- determine if we show ConfidentialClientEvaluationLastYearPage content -->

		<div>
			<a id="ConfidentialClientEvaluationLastYearPage"></a>

		</div>

		<div class="whiteGrad">

			<h1 class="text-center w3-text-black">Previous Year’s Media
				Allocation</h1>
			<script>
			// Load the Visualization API and the corechart package.
            //google.charts.load('current', {'packages':['corechart']});


           // Set a callback to run when the Google Visualization API is loaded.
            google.charts.setOnLoadCallback(drawChart);
           
            var totalAdvertisingInvestmentValue=0;
			var arrayChartDataPointLastYear= [];
			class ChartDataPointLastYear {
			    constructor(name, value) {
			        this.name = name;
			        this.value = value;
			    }
			}

			function addChartDataPoint (name, value) {
				
				console.group("addChartDataPoint");
				console.log("name " + name);
				console.log("value " + value);
				
			          let x = new ChartDataPointLastYear(name,value); 
				      arrayChartDataPointLastYear.push(x);
				      console.groupEnd();
			   
			}

			function drawChart() {

				   console.group("drawChart");
				   console.log("arrayChartDataPointLastYear.length " + arrayChartDataPointLastYear.length);
				   var data = new google.visualization.DataTable();
			           data.addColumn('string', 'Topping');
			           data.addColumn('number', 'Slices');
				
				     for (i = 0; i < arrayChartDataPointLastYear.length; i++) {
			                   var name = arrayChartDataPointLastYear[i].name;
			                   var value = arrayChartDataPointLastYear[i].value;
			                   totalAdvertisingInvestmentValue = totalAdvertisingInvestmentValue + value;
			                   console.log("totalAdvertisingInvestmentValue " + totalAdvertisingInvestmentValue);
			                   data.addRow([name, value]);
			          
			        }//end of for
			        totalAdvertisingInvestmentValue = CurrencyFormatted(totalAdvertisingInvestmentValue);
			        document.getElementById("totalAdvertisingInvestment").innerHTML = totalAdvertisingInvestmentValue;
				      
				     // Set chart options
				        //var options = {'title':'Previous Year’s Media Allocation '};
					var options = {
        				width: '50%',
			                is3D: true,
                		    height: '50%',
             			chartArea: {
            				left: "25%",
            				top: "3%",
            				height: "94%",
            				width: "94%"
            			  }
        				};
				
				  // find total to calc % manually
  					var totalData = google.visualization.data.group( data,[{column: 0, modifier: function () {return 'total'}, type:'string'}],
    					[{column: 1, aggregation: google.visualization.data.sum, type: 'number'}]
  					);
				
				      // number formatter
  					var formatPercent = new google.visualization.NumberFormat({
  					  pattern: '0%'
  				 // set formatted value for each row
  					for (var i = 0; i < data.getNumberOfRows(); i++) {
    					    var calcPercent = data.getValue(i, 1) / totalData.getValue(0, 1);
    					    data.setFormattedValue(i, 1, formatPercent.formatValue(calcPercent));
 					   }
					
                                      //end of calculation

				
				        // Instantiate and draw our chart, passing in some options.
				        var chart = new google.visualization.PieChart(document.getElementById('piechart_3d'));
				        chart.draw(data,options);
				        console.groupEnd();
				        //chart.draw(data, options);
			}


			</script>

			<script type="text/javascript" th:inline="javascript">
				/*<![CDATA[*/
				

				/*[# th:each="chartData : ${ConfidentialClientEvaluationOnePageLastYearChartModel}"]*/

					addChartDataPoint(/*[[${chartData.label}]]*/, /*[[${chartData.labelValue}]]*/); // Add a row with a string and a date value.
					
				/*[/]*/	
					

               /*]]>*/
			</script>
			
			<div id="chart_wrap">
				<div id="piechart_3d"></div>
			</div>
			<div>
				Total Advertising Investment (TAI): <span
					id="totalAdvertisingInvestment"></span>
			</div>
			<script>
	     
			     
			</script>
		</div>
		<div class="w3-container d-print-none" style="padding-top: 2%;">
			<button class="w3-btn w3-white" onclick="javascript:printPage();">Share</button>
		<button class="w3-btn w3-white" onclick="javascript:gotoAnchor(9,'down');">Next</button>
	<button class="w3-btn w3-white" onclick="javascript:gotoAnchor(7,'up');">Previous</button>
		</div>
		<div class="w3-row">
			<div class="CopyRightId w3-col m8"></div>
			<div class=" w3-col m2"></div>
			<div align="right" class="w3-col m2">-CONFIDENTIAL- 8</div>
		</div>
		<!-- end of if statement -->
		

	</div>
	<!-- end of PresentedTofragment -->
